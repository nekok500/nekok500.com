---
import { getCollection } from 'astro:content'
import BaseLayout from '../layouts/BaseLayout.astro'
import { dateStr } from '../lib/utils'

const posts = (await getCollection('blog')).filter(
  (e) => e.data.draft === false,
)
---

<meta name="robots" content="noindex" />
<BaseLayout pageTitle="ブログ一覧">
  <div class="flex flex-col space-y-4">
    <h1 class="text-4xl font-semibold">ブログ一覧</h1>
    {
      posts.map((e) => (
        <a href={`/blog/${e.slug}/`}>
          <div class="flex flex-col space-y-2 rounded-md border border-gray-600 px-4 py-2">
            <span class="text-2xl">{e.data.title}</span>
            <div class="text-gray-600">
              <span>投稿日時: {dateStr(e.data.published)}</span>
              {e.data.updated && (
                <span>更新日時: {dateStr(e.data.updated)}</span>
              )}
            </div>
          </div>
        </a>
      ))
    }
  </div>
</BaseLayout>
